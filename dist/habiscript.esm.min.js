"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={exports:{}},n={exports:{}};n.exports=function(){function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t){return c(t)?t:a(r({stylesObject:t}))}const n="__*__";function r({stylesObject:t,parentSelector:e="",cssObject:i={},nestedSelector:a=""}){if(Array.isArray(t)){const[r,o]=t,c=`${s(r)}:${o};`,l=a?i[a]=i[a]||{}:i,u=s(e||n);l[u]=(l[u]||"")+c}else Object.keys(t).forEach((c=>{const l=t[c];if(c.startsWith("@"))r({stylesObject:l,cssObject:i,nestedSelector:c});else if("object"!=typeof l){const t=`${s(c)}:${l};`,r=a?i[a]=i[a]||{}:i,o=s(e||n);r[o]=(r[o]||"")+t}else r({stylesObject:l,parentSelector:o(e,c),cssObject:i,nestedSelector:a})}));return i}function o(t,e){if(!t)return e;const n=i(t),r=i(e);return n.map((t=>r.map((e=>`${t}${e.startsWith(":")?"":" "}${e}`)).join(","))).join(",")}function s(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function i(t){return t.split(",").map((t=>t.trim()))}function a(t){return"object"!=typeof t||Array.isArray(t)||c(t)?t:Object.entries(t).map((([t,e])=>t===n?a(e):`${t}{${a(e)}}`)).join("")}function c(t){return!t||0===Object.keys(t).length}var l=t({style:e});return l}();var r=n.exports;!function(t){const{style:e}=r,n=/\.[^.#]+/g,o=/#[^.#]+/;function s(t){let e={};return t.split(";").forEach((t=>{let[n,r]=t.split(":");n&&r&&(n=n.trim(),n=n.replace(/-./g,(t=>t.charAt(1).toUpperCase())),e[n]=r.trim())})),e}function i(t){if("string"==typeof t)return document.createTextNode(t);if(t instanceof Node)return t;const[e,...r]=t;let s,a={};if("string"!=typeof e)throw new Error("The first element of the habiscript array must be a string.");{s=e.split(/[#.]/)[0];const t=e.match(n),r=e.match(o);t&&(a.class=t.map((t=>t.substring(1))).join(" ")),r&&(a.id=r[0].substring(1))}r.length>0&&"object"==typeof r[0]&&!Array.isArray(r[0])&&Object.assign(a,r.shift());return function(t,e={},n){const r=document.createElement(t);for(const[t,n]of Object.entries(e))if("style"===t&&"object"==typeof n)Object.assign(r.style,n);else if("function"==typeof n&&t.startsWith("on")){const e=t.substring(2).toLowerCase();r.addEventListener(e,n)}else void 0!==n&&r.setAttribute(t,n);for(const t of n)"string"==typeof t?r.appendChild(document.createTextNode(t)):t instanceof Node?r.appendChild(t):Array.isArray(t)&&r.appendChild(i(t));return r}(s,a,r.flatMap((t=>Array.isArray(t)?i(t):t)))}function a(t,e){let n="string"==typeof t?t:null,r=Array.isArray(t)?t:e;if(!r||n&&!e)throw new Error("Invalid arguments. Expected a selector string and Habiscript array, or just a Habiscript array.");const o=i(r);return n?function(t,e){return"loading"===document.readyState?new Promise((n=>{document.addEventListener("DOMContentLoaded",(()=>{c(t,e),n(e)}))})):(c(t,e),e)}(n,o):function(t){const e=document.currentScript;e&&e.parentNode?e.parentNode.insertBefore(t,e.nextSibling):console.warn("Unable to determine script location. Element created but not inserted.");return t}(o)}function c(t,e){const n=document.querySelector(t);n?n.appendChild(e):console.warn(`Target element with selector "${t}" not found.`)}a.habiToHtml=i,a.htmlToHabi=function t(e){if("string"==typeof e){return t((new DOMParser).parseFromString(e,"text/html").body.firstChild)}if(e.nodeType===Node.TEXT_NODE)return e.textContent;let n=e.tagName.toLowerCase();e.id&&(n+=`#${e.id}`),e.className&&(n+=`.${e.className.split(" ").join(".")}`);const r=[n],o={};for(const t of e.attributes)"class"!==t.name&&"id"!==t.name&&("style"===t.name?o.style=s(t.value):o[t.name]=t.value);Object.keys(o).length>0&&r.push(o);for(const n of e.childNodes)r.push(t(n));return r},a.toElement=function(t){return i(t)},a.style=function(t){return this.toElement(["style",e(t)])},t.exports?t.exports=a:"undefined"!=typeof window&&(window.Habiscript=a)}(e);var o=t(e.exports);export{o as default};
