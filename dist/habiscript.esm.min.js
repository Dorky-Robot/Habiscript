"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}},r={exports:{}};r.exports=function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return c(e)?e:a(n({stylesObject:e}))}const r="__*__";function n({stylesObject:e,parentSelector:t="",cssObject:i={},nestedSelector:a=""}){if(Array.isArray(e)){const[n,o]=e,c=`${s(n)}:${o};`,l=a?i[a]=i[a]||{}:i,f=s(t||r);l[f]=(l[f]||"")+c}else Object.keys(e).forEach((c=>{const l=e[c];if(c.startsWith("@"))n({stylesObject:l,cssObject:i,nestedSelector:c});else if("object"!=typeof l){const e=`${s(c)}:${l};`,n=a?i[a]=i[a]||{}:i,o=s(t||r);n[o]=(n[o]||"")+e}else n({stylesObject:l,parentSelector:o(t,c),cssObject:i,nestedSelector:a})}));return i}function o(e,t){if(!e)return t;const r=i(e),n=i(t);return r.map((e=>n.map((t=>`${e}${t.startsWith(":")?"":" "}${t}`)).join(","))).join(",")}function s(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split(",").map((e=>e.trim()))}function a(e){return"object"!=typeof e||Array.isArray(e)||c(e)?e:Object.entries(e).map((([e,t])=>e===r?a(t):`${e}{${a(t)}}`)).join("")}function c(e){return!e||0===Object.keys(e).length}var l=e({style:t});return l}();var n=r.exports;!function(e){const{style:t}=n,r=/\.[^.#]+/g,o=/#[^.#]+/;function s(e){let t={};return e.split(";").forEach((e=>{let[r,n]=e.split(":");r&&n&&(r=r.trim(),r=r.replace(/-./g,(e=>e.charAt(1).toUpperCase())),t[r]=n.trim())})),t}function i(e){if("string"==typeof e)return document.createTextNode(e);if(e instanceof Node)return e;const[t,...n]=e;let s,a={};if("string"!=typeof t)throw new Error("The first element of the habiscript array must be a string.");{s=t.split(/[#.]/)[0];const e=t.match(r),n=t.match(o);e&&(a.class=e.map((e=>e.substring(1))).join(" ")),n&&(a.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(a,n.shift());return function(e,t={},r){const n=document.createElement(e);for(const[e,r]of Object.entries(t))if("style"===e&&"object"==typeof r)Object.assign(n.style,r);else if("function"==typeof r&&e.startsWith("on")){const t=e.substring(2).toLowerCase();n.addEventListener(t,r)}else void 0!==r&&n.setAttribute(e,r);for(const e of r)"string"==typeof e?n.appendChild(document.createTextNode(e)):e instanceof Node?n.appendChild(e):Array.isArray(e)&&n.appendChild(i(e));return n}(s,a,n.flatMap((e=>Array.isArray(e)?i(e):e)))}function a(e,t){let r,n;if("string"==typeof e&&Array.isArray(t))r=e,n=t;else{if(!Array.isArray(e))throw new Error("Invalid arguments. Expected a selector string and Habiscript array, or just a Habiscript array.");n=e}const o=i(n);if(r){const e=document.querySelector(r);e?e.appendChild(o):console.warn(`Target element with selector "${r}" not found.`)}else{const e=document.currentScript;e&&e.parentNode?e.parentNode.insertBefore(o,e.nextSibling):console.warn("Unable to determine script location. Element created but not inserted.")}return o}a.habiToHtml=i,a.htmlToHabi=function e(t){if("string"==typeof t){return e((new DOMParser).parseFromString(t,"text/html").body.firstChild)}if(t.nodeType===Node.TEXT_NODE)return t.textContent;let r=t.tagName.toLowerCase();t.id&&(r+=`#${t.id}`),t.className&&(r+=`.${t.className.split(" ").join(".")}`);const n=[r],o={};for(const e of t.attributes)"class"!==e.name&&"id"!==e.name&&("style"===e.name?o.style=s(e.value):o[e.name]=e.value);Object.keys(o).length>0&&n.push(o);for(const r of t.childNodes)n.push(e(r));return n},a.toElement=function(e){return i(e)},a.style=function(e){return this.toElement(["style",t(e)])},e.exports?e.exports=a:"undefined"!=typeof window&&(window.Habiscript=a)}(t);var o=e(t.exports);export{o as default};
