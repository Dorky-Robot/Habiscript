!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Habiscript=t()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}},n={exports:{}};!function(e,t){e.exports=function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return a(e)?e:c(o({stylesObject:e}))}const n="__*__";function o({stylesObject:e,parentSelector:t="",cssObject:i={},nestedSelector:c=""}){if(Array.isArray(e)){const[o,r]=e,a=`${s(o)}:${r};`,f=c?i[c]=i[c]||{}:i,l=s(t||n);f[l]=(f[l]||"")+a}else Object.keys(e).forEach((a=>{const f=e[a];if(a.startsWith("@"))o({stylesObject:f,cssObject:i,nestedSelector:a});else if("object"!=typeof f){const e=`${s(a)}:${f};`,o=c?i[c]=i[c]||{}:i,r=s(t||n);o[r]=(o[r]||"")+e}else o({stylesObject:f,parentSelector:r(t,a),cssObject:i,nestedSelector:c})}));return i}function r(e,t){if(!e)return t;const n=i(e),o=i(t);return n.map((e=>o.map((t=>`${e}${t.startsWith(":")?"":" "}${t}`)).join(","))).join(",")}function s(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split(",").map((e=>e.trim()))}function c(e){return"object"!=typeof e||Array.isArray(e)||a(e)?e:Object.entries(e).map((([e,t])=>e===n?c(t):`${e}{${c(t)}}`)).join("")}function a(e){return!e||0===Object.keys(e).length}var f=e({style:t});return f}()}(n);var o=n.exports;return function(e){const{style:t}=o,n=/\.[^.#]+/g,r=/#[^.#]+/;function s(e){let t={};return e.split(";").forEach((e=>{let[n,o]=e.split(":");n&&o&&(n=n.trim(),n=n.replace(/-./g,(e=>e.charAt(1).toUpperCase())),t[n]=o.trim())})),t}function i(e){if("string"==typeof e)return document.createTextNode(e);if(e instanceof Node)return e;const[t,...o]=e;let s,c={};if("string"!=typeof t)throw new Error("The first element of the habiscript array must be a string.");{s=t.split(/[#.]/)[0];const e=t.match(n),o=t.match(r);e&&(c.class=e.map((e=>e.substring(1))).join(" ")),o&&(c.id=o[0].substring(1))}o.length>0&&"object"==typeof o[0]&&!Array.isArray(o[0])&&Object.assign(c,o.shift());return function(e,t={},n){const o=document.createElement(e);for(const[e,n]of Object.entries(t))if("style"===e&&"object"==typeof n)Object.assign(o.style,n);else if("function"==typeof n&&e.startsWith("on")){const t=e.substring(2).toLowerCase();o.addEventListener(t,n)}else void 0!==n&&o.setAttribute(e,n);for(const e of n)"string"==typeof e?o.appendChild(document.createTextNode(e)):e instanceof Node?o.appendChild(e):Array.isArray(e)&&o.appendChild(i(e));return o}(s,c,o.flatMap((e=>Array.isArray(e)?i(e):e)))}function c(e){const t=i(e);return"undefined"!=typeof document&&document.body.appendChild(t),t}c.habiToHtml=i,c.htmlToHabi=function e(t){if("string"==typeof t){return e((new DOMParser).parseFromString(t,"text/html").body.firstChild)}if(t.nodeType===Node.TEXT_NODE)return t.textContent;let n=t.tagName.toLowerCase();t.id&&(n+=`#${t.id}`),t.className&&(n+=`.${t.className.split(" ").join(".")}`);const o=[n],r={};for(const e of t.attributes)"class"!==e.name&&"id"!==e.name&&("style"===e.name?r.style=s(e.value):r[e.name]=e.value);Object.keys(r).length>0&&o.push(r);for(const n of t.childNodes)o.push(e(n));return o},c.toElement=function(e){return i(e)},c.style=function(e){return this.toElement(["style",t(e)])},e.exports?e.exports=c:"undefined"!=typeof window&&(window.Habiscript=c)}(t),e(t.exports)}));
